<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>additions.Pow</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library additions.Pow</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab397"></a><h1 class="section">Exponentiation   in a Monoid</h1>


<div class="paragraph"> </div>

In this section, we give two polymorphic functions for computing
 : the  naive ( linear) one and the aforementionned 
binary method, that takes less than  multiplications.

<div class="paragraph"> </div>

 Both functions require an instance of <span class="inlinecode"><span class="id" title="var">EMonoid</span></span>. Their code use the 
 multiplication of the monoid, and sometimes  its  unity. 
  Correctness proofs require the "axioms" of monoid structure.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Arith.Div2.html#"><span class="id" title="library">Div2</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.funind.Recdef.html#"><span class="id" title="library">Recdef</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Relations.Relations.html#"><span class="id" title="library">Relations</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="additions.Monoid_def.html#"><span class="id" title="library">Monoid_def</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Arith.Arith.html#"><span class="id" title="library">Arith</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">M_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab398"></a><h2 class="section">Two functions for computing powers</h2>


<div class="paragraph"> </div>

 The  module defines two functions for exponentiation on any <span class="inlinecode"><span class="id" title="var">Emonoid</span></span> 
  on carrier .

<div class="paragraph"> </div>

<ul class="doclist">
<li> The function <span class="inlinecode"><span class="id" title="var">power</span></span> has type <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">A</span></span>; it is linear with respect to 
    the exponent. Its simplicity and the fact that the exponent has type <span class="inlinecode"><span class="id" title="var">nat</span></span> 
    make it adequate for being the reference for any other definition, and for 
    easily proving laws like .
    

<div class="paragraph"> </div>


</li>
<li> The function <span class="inlinecode"><span class="id" title="var">Pos_bpow</span></span> has type <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">positive</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">A</span></span> and is logarithmic
   with respect to its exponent. This function should be used for effective
   computations. Its variant <span class="inlinecode"><span class="id" title="var">N_bpow</span></span> allows the exponent to be .

</li>
</ul>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab399"></a><h3 class="section">The "naive" reference function</h3>

</div>
<div class="code">
<span class="id" title="keyword">Generalizable Variables</span>  <span class="id" title="var">A</span> <span class="id" title="var">E_op</span> <span class="id" title="var">E_one</span> <span class="id" title="var">E_eq</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="power" class="idref" href="#power"><span class="id" title="definition">power</span></a> `{<a id="M:5" class="idref" href="#M:5"><span class="id" title="binder">M</span></a>: @<a class="idref" href="additions.Monoid_def.html#EMonoid"><span class="id" title="class">EMonoid</span></a> <a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a>  <a id="E_op:2" class="idref" href="#E_op:2"><span class="id" title="binder">E_op</span></a> <a id="E_one:3" class="idref" href="#E_one:3"><span class="id" title="binder">E_one</span></a> <a id="E_eq:4" class="idref" href="#E_eq:4"><span class="id" title="binder">E_eq</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="x:6" class="idref" href="#x:6"><span class="id" title="binder">x</span></a>:<a class="idref" href="additions.Pow.html#A:1"><span class="id" title="variable">A</span></a>)(<a id="n:7" class="idref" href="#n:7"><span class="id" title="binder">n</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="additions.Pow.html#n:7"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span> 0%<span class="id" title="var">nat</span> ⇒ <a class="idref" href="additions.Pow.html#E_one:3"><span class="id" title="variable">E_one</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">p</span> ⇒   <a class="idref" href="additions.Pow.html#x:6"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a>  <a class="idref" href="additions.Pow.html#x:6"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">where</span> <a id="765592cb239fbb605ff794a9833fef51" class="idref" href="#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">&quot;</span></a>x ^ n" := (<a class="idref" href="additions.Pow.html#power:8"><span class="id" title="definition">power</span></a> <span class="id" title="var">x</span> <span class="id" title="var">n</span>) : <span class="id" title="var">M_scope</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_eq1" class="idref" href="#power_eq1"><span class="id" title="lemma">power_eq1</span></a>  `{<a id="M:14" class="idref" href="#M:14"><span class="id" title="binder">M</span></a>: @<a class="idref" href="additions.Monoid_def.html#EMonoid"><span class="id" title="class">EMonoid</span></a> <a id="A:10" class="idref" href="#A:10"><span class="id" title="binder">A</span></a>  <a id="E_op:11" class="idref" href="#E_op:11"><span class="id" title="binder">E_op</span></a> <a id="E_one:12" class="idref" href="#E_one:12"><span class="id" title="binder">E_one</span></a> <a id="E_eq:13" class="idref" href="#E_eq:13"><span class="id" title="binder">E_eq</span></a>}(<a id="x:15" class="idref" href="#x:15"><span class="id" title="binder">x</span></a>:<a class="idref" href="additions.Pow.html#A:10"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#x:15"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="additions.Pow.html#E_one:12"><span class="id" title="variable">E_one</span></a>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_eq2" class="idref" href="#power_eq2"><span class="id" title="lemma">power_eq2</span></a>  `{<a id="M:20" class="idref" href="#M:20"><span class="id" title="binder">M</span></a>: @<a class="idref" href="additions.Monoid_def.html#EMonoid"><span class="id" title="class">EMonoid</span></a> <a id="A:16" class="idref" href="#A:16"><span class="id" title="binder">A</span></a>  <a id="E_op:17" class="idref" href="#E_op:17"><span class="id" title="binder">E_op</span></a> <a id="E_one:18" class="idref" href="#E_one:18"><span class="id" title="binder">E_one</span></a> <a id="E_eq:19" class="idref" href="#E_eq:19"><span class="id" title="binder">E_eq</span></a>}(<a id="x:21" class="idref" href="#x:21"><span class="id" title="binder">x</span></a>:<a class="idref" href="additions.Pow.html#A:16"><span class="id" title="variable">A</span></a>) (<a id="n:22" class="idref" href="#n:22"><span class="id" title="binder">n</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;<a class="idref" href="additions.Pow.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="additions.Pow.html#n:22"><span class="id" title="variable">n</span></a><a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">)</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="additions.Pow.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:22"><span class="id" title="variable">n</span></a>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_eq3" class="idref" href="#power_eq3"><span class="id" title="lemma">power_eq3</span></a>  `{<a id="M:27" class="idref" href="#M:27"><span class="id" title="binder">M</span></a>: @<a class="idref" href="additions.Monoid_def.html#EMonoid"><span class="id" title="class">EMonoid</span></a> <a id="A:23" class="idref" href="#A:23"><span class="id" title="binder">A</span></a>  <a id="E_op:24" class="idref" href="#E_op:24"><span class="id" title="binder">E_op</span></a> <a id="E_one:25" class="idref" href="#E_one:25"><span class="id" title="binder">E_one</span></a> <a id="E_eq:26" class="idref" href="#E_eq:26"><span class="id" title="binder">E_eq</span></a>}(<a id="x:28" class="idref" href="#x:28"><span class="id" title="binder">x</span></a>:<a class="idref" href="additions.Pow.html#A:23"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;<a class="idref" href="additions.Pow.html#x:28"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> 1 <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#x:28"><span class="id" title="variable">x</span></a>.<br/>
 
<br/>
</div>

<div class="doc">
<a id="lab400"></a><h3 class="section">The binary exponentiation function (exponents in  <span class="inlinecode"><span class="id" title="var">positive</span></span>)</h3>

<div class="paragraph"> </div>

<a id="lab401"></a><h3 class="section"> </h3>


<div class="paragraph"> </div>

The auxiliary function below computes  , where
the "accumulator" <span class="inlinecode"><span class="id" title="var">acc</span></span> is intented to be an already computed power of <span class="inlinecode"><span class="id" title="var">x</span></span>:

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="binary_power_mult" class="idref" href="#binary_power_mult"><span class="id" title="definition">binary_power_mult</span></a>  `{<a id="M:33" class="idref" href="#M:33"><span class="id" title="binder">M</span></a>: @<a class="idref" href="additions.Monoid_def.html#EMonoid"><span class="id" title="class">EMonoid</span></a> <a id="A:29" class="idref" href="#A:29"><span class="id" title="binder">A</span></a> <a id="E_op:30" class="idref" href="#E_op:30"><span class="id" title="binder">E_op</span></a> <a id="E_one:31" class="idref" href="#E_one:31"><span class="id" title="binder">E_one</span></a> <a id="E_eq:32" class="idref" href="#E_eq:32"><span class="id" title="binder">E_eq</span></a>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="x:34" class="idref" href="#x:34"><span class="id" title="binder">x</span></a> <a id="a:35" class="idref" href="#a:35"><span class="id" title="binder">a</span></a>:<a class="idref" href="additions.Pow.html#A:29"><span class="id" title="variable">A</span></a>)(<a id="p:36" class="idref" href="#p:36"><span class="id" title="binder">p</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#positive"><span class="id" title="inductive">positive</span></a>) : <a class="idref" href="additions.Pow.html#A:29"><span class="id" title="variable">A</span></a> <br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="additions.Pow.html#p:36"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#xH"><span class="id" title="constructor">xH</span></a> ⇒  <a class="idref" href="additions.Pow.html#a:35"><span class="id" title="variable">a</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:34"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#xO"><span class="id" title="constructor">xO</span></a> <span class="id" title="var">q</span> ⇒ <a class="idref" href="additions.Pow.html#binary_power_mult:37"><span class="id" title="definition">binary_power_mult</span></a> (<a class="idref" href="additions.Pow.html#x:34"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:34"><span class="id" title="variable">x</span></a>) <a class="idref" href="additions.Pow.html#a:35"><span class="id" title="variable">a</span></a> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#xI"><span class="id" title="constructor">xI</span></a> <span class="id" title="var">q</span> ⇒  <a class="idref" href="additions.Pow.html#binary_power_mult:37"><span class="id" title="definition">binary_power_mult</span></a>  (<a class="idref" href="additions.Pow.html#x:34"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:34"><span class="id" title="variable">x</span></a>) (<a class="idref" href="additions.Pow.html#a:35"><span class="id" title="variable">a</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:34"><span class="id" title="variable">x</span></a>) <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab402"></a><h3 class="section"> </h3>


<div class="paragraph"> </div>

The  following function decomposes the exponent <span class="inlinecode"><span class="id" title="var">p</span></span>
  into  , then calls <span class="inlinecode"><span class="id" title="var">binary_power_mult</span></span>
   with  and .

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="Pos_bpow" class="idref" href="#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a>  `{<a id="M:43" class="idref" href="#M:43"><span class="id" title="binder">M</span></a>: @<a class="idref" href="additions.Monoid_def.html#EMonoid"><span class="id" title="class">EMonoid</span></a> <a id="A:39" class="idref" href="#A:39"><span class="id" title="binder">A</span></a> <a id="E_op:40" class="idref" href="#E_op:40"><span class="id" title="binder">E_op</span></a> <a id="E_one:41" class="idref" href="#E_one:41"><span class="id" title="binder">E_one</span></a> <a id="E_eq:42" class="idref" href="#E_eq:42"><span class="id" title="binder">E_eq</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="x:44" class="idref" href="#x:44"><span class="id" title="binder">x</span></a>:<a class="idref" href="additions.Pow.html#A:39"><span class="id" title="variable">A</span></a>)(<a id="p:45" class="idref" href="#p:45"><span class="id" title="binder">p</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#positive"><span class="id" title="inductive">positive</span></a>) :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="additions.Pow.html#p:45"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#xH"><span class="id" title="constructor">xH</span></a> ⇒ <a class="idref" href="additions.Pow.html#x:44"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#xO"><span class="id" title="constructor">xO</span></a> <span class="id" title="var">q</span> ⇒ <a class="idref" href="additions.Pow.html#Pos_bpow:46"><span class="id" title="definition">Pos_bpow</span></a>  (<a class="idref" href="additions.Pow.html#x:44"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:44"><span class="id" title="variable">x</span></a>) <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#xI"><span class="id" title="constructor">xI</span></a> <span class="id" title="var">q</span> ⇒ <a class="idref" href="additions.Pow.html#binary_power_mult"><span class="id" title="definition">binary_power_mult</span></a>  (<a class="idref" href="additions.Pow.html#x:44"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:44"><span class="id" title="variable">x</span></a>) <a class="idref" href="additions.Pow.html#x:44"><span class="id" title="variable">x</span></a> <span class="id" title="var">q</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
***
  It is straightforward to adapt <span class="inlinecode"><span class="id" title="var">Pos_bpow</span></span>
 for accepting exponents of type <span class="inlinecode"><span class="id" title="var">N</span></span> :

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="N_bpow" class="idref" href="#N_bpow"><span class="id" title="definition">N_bpow</span></a>  `{<a id="M:52" class="idref" href="#M:52"><span class="id" title="binder">M</span></a>: @<a class="idref" href="additions.Monoid_def.html#EMonoid"><span class="id" title="class">EMonoid</span></a> <a id="A:48" class="idref" href="#A:48"><span class="id" title="binder">A</span></a> <a id="E_op:49" class="idref" href="#E_op:49"><span class="id" title="binder">E_op</span></a> <a id="E_one:50" class="idref" href="#E_one:50"><span class="id" title="binder">E_one</span></a> <a id="E_eq:51" class="idref" href="#E_eq:51"><span class="id" title="binder">E_eq</span></a>} <a id="x:53" class="idref" href="#x:53"><span class="id" title="binder">x</span></a> (<a id="n:54" class="idref" href="#n:54"><span class="id" title="binder">n</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>) := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="additions.Pow.html#n:54"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;| 0%<span class="id" title="var">N</span> ⇒ <a class="idref" href="additions.Pow.html#E_one:50"><span class="id" title="variable">E_one</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Numbers.BinNums.html#Npos"><span class="id" title="constructor">Npos</span></a> <span class="id" title="var">p</span> ⇒ <a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> <a class="idref" href="additions.Pow.html#x:53"><span class="id" title="variable">x</span></a> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a id="0ad68a69d54362abc023eb138c77275f" class="idref" href="#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">&quot;</span></a>^b" := <a class="idref" href="additions.Pow.html#N_bpow"><span class="id" title="definition">N_bpow</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">M_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab403"></a><h2 class="section">Properties of the power function</h2>


<div class="paragraph"> </div>

 Taking <span class="inlinecode"><span class="id" title="var">power</span></span> as a reference, it remains to prove two kinds of properties
<ul class="doclist">
<li> Mathematical properties of exponentiation, <i>i.e</i> the function <span class="inlinecode"><span class="id" title="var">power</span></span>,

<div class="paragraph"> </div>


</li>
<li> proving  correctness of functions <span class="inlinecode"><span class="id" title="var">Pos_bpow</span></span> and <span class="inlinecode"><span class="id" title="var">N_bpow</span></span>

</li>
</ul>

<div class="paragraph"> </div>

First, let us consider some <span class="inlinecode"><span class="id" title="var">Emonoid</span></span> and define some useful notations and tactics:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="M_given" class="idref" href="#M_given"><span class="id" title="section">M_given</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<a id="M_given.A" class="idref" href="#M_given.A"><span class="id" title="variable">A</span></a>:<span class="id" title="keyword">Type</span>) (<a id="M_given.E_one" class="idref" href="#M_given.E_one"><span class="id" title="variable">E_one</span></a>:<a class="idref" href="additions.Pow.html#A:56"><span class="id" title="variable">A</span></a>) .<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="E_op:58" class="idref" href="#E_op:58"><span class="id" title="binder">E_op</span></a> : <a class="idref" href="additions.Monoid_def.html#Mult_op"><span class="id" title="class">Mult_op</span></a> <a class="idref" href="additions.Pow.html#M_given.A"><span class="id" title="variable">A</span></a>) (<a id="E_eq:59" class="idref" href="#E_eq:59"><span class="id" title="binder">E_eq</span></a> : <a class="idref" href="additions.Monoid_def.html#Equiv"><span class="id" title="class">Equiv</span></a> <a class="idref" href="additions.Pow.html#M_given.A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="M:60" class="idref" href="#M:60"><span class="id" title="binder">M</span></a>:<a class="idref" href="additions.Monoid_def.html#EMonoid"><span class="id" title="class">EMonoid</span></a>  <a class="idref" href="additions.Pow.html#E_op:58"><span class="id" title="variable">E_op</span></a> <a class="idref" href="additions.Pow.html#M_given.E_one"><span class="id" title="variable">E_one</span></a> <a class="idref" href="additions.Pow.html#E_eq:59"><span class="id" title="variable">E_eq</span></a>).<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Eop_proper" class="idref" href="#Eop_proper"><span class="id" title="instance">Eop_proper</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="additions.Monoid_def.html#equiv"><span class="id" title="definition">equiv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="additions.Monoid_def.html#equiv"><span class="id" title="definition">equiv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="additions.Monoid_def.html#equiv"><span class="id" title="definition">equiv</span></a>) <a class="idref" href="additions.Pow.html#M_given.E_op"><span class="id" title="variable">E_op</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">monoid_rw</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="additions.Monoid_def.html#Eone_left"><span class="id" title="method">Eone_left</span></a>  ||<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="additions.Monoid_def.html#Eone_right"><span class="id" title="method">Eone_right</span></a>  || <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="additions.Monoid_def.html#Eop_assoc"><span class="id" title="method">Eop_assoc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">monoid_simpl</span> := <span class="id" title="tactic">repeat</span> <span class="id" title="var">monoid_rw</span>.<br/>

<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="power_proper" class="idref" href="#power_proper"><span class="id" title="instance">power_proper</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="additions.Monoid_def.html#equiv"><span class="id" title="definition">equiv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="additions.Monoid_def.html#equiv"><span class="id" title="definition">equiv</span></a>) <a class="idref" href="additions.Pow.html#power"><span class="id" title="definition">power</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_of_plus" class="idref" href="#power_of_plus"><span class="id" title="lemma">power_of_plus</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="x:61" class="idref" href="#x:61"><span class="id" title="binder">x</span></a> <a id="n:62" class="idref" href="#n:62"><span class="id" title="binder">n</span></a> <a id="p:63" class="idref" href="#p:63"><span class="id" title="binder">p</span></a>, <a class="idref" href="additions.Pow.html#x:61"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">(</span></a><a class="idref" href="additions.Pow.html#n:62"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="additions.Pow.html#p:63"><span class="id" title="variable">p</span></a><a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">)</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a>  <a class="idref" href="additions.Pow.html#x:61"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:62"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a>  <a class="idref" href="additions.Pow.html#x:61"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#p:63"><span class="id" title="variable">p</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">power_simpl</span> := <span class="id" title="tactic">repeat</span> (<span class="id" title="var">monoid_rw</span> || <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="additions.Pow.html#power_of_plus"><span class="id" title="lemma">power_of_plus</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_commute" class="idref" href="#power_commute"><span class="id" title="lemma">power_commute</span></a> <a id="x:64" class="idref" href="#x:64"><span class="id" title="binder">x</span></a> <a id="n:65" class="idref" href="#n:65"><span class="id" title="binder">n</span></a> <a id="p:66" class="idref" href="#p:66"><span class="id" title="binder">p</span></a>: <br/>
&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#x:64"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:65"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:64"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#p:66"><span class="id" title="variable">p</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a>  <a class="idref" href="additions.Pow.html#x:64"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#p:66"><span class="id" title="variable">p</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:64"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:65"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_commute_with_x" class="idref" href="#power_commute_with_x"><span class="id" title="lemma">power_commute_with_x</span></a> <a id="x:67" class="idref" href="#x:67"><span class="id" title="binder">x</span></a> <a id="n:68" class="idref" href="#n:68"><span class="id" title="binder">n</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#x:67"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:67"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:68"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#x:67"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:68"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:67"><span class="id" title="variable">x</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_of_power" class="idref" href="#power_of_power"><span class="id" title="lemma">power_of_power</span></a> <a id="x:69" class="idref" href="#x:69"><span class="id" title="binder">x</span></a> <a id="n:70" class="idref" href="#n:70"><span class="id" title="binder">n</span></a> <a id="p:71" class="idref" href="#p:71"><span class="id" title="binder">p</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">(</span></a><a class="idref" href="additions.Pow.html#x:69"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:70"><span class="id" title="variable">n</span></a><a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">)</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#p:71"><span class="id" title="variable">p</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#x:69"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">(</span></a><a class="idref" href="additions.Pow.html#p:71"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#n:70"><span class="id" title="variable">n</span></a><a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_of_power_comm" class="idref" href="#power_of_power_comm"><span class="id" title="lemma">power_of_power_comm</span></a> <a id="x:72" class="idref" href="#x:72"><span class="id" title="binder">x</span></a> <a id="n:73" class="idref" href="#n:73"><span class="id" title="binder">n</span></a> <a id="p:74" class="idref" href="#p:74"><span class="id" title="binder">p</span></a> : <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">(</span></a><a class="idref" href="additions.Pow.html#x:72"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:73"><span class="id" title="variable">n</span></a><a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">)</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#p:74"><span class="id" title="variable">p</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">(</span></a><a class="idref" href="additions.Pow.html#x:72"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#p:74"><span class="id" title="variable">p</span></a><a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">)</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:73"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sqr_eqn" class="idref" href="#sqr_eqn"><span class="id" title="lemma">sqr_eqn</span></a> : <span class="id" title="keyword">∀</span> <a id="x:75" class="idref" href="#x:75"><span class="id" title="binder">x</span></a>, <a class="idref" href="additions.Pow.html#x:75"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> 2 <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a>  <a class="idref" href="additions.Pow.html#x:75"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:75"><span class="id" title="variable">x</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">factorize</span> := <span class="id" title="tactic">repeat</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="additions.Pow.html#power_commute_with_x"><span class="id" title="lemma">power_commute_with_x</span></a> ||<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  &lt;- <a class="idref" href="additions.Pow.html#power_of_plus"><span class="id" title="lemma">power_of_plus</span></a>  ||<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="additions.Pow.html#sqr_eqn"><span class="id" title="lemma">sqr_eqn</span></a> ||<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="additions.Pow.html#power_eq2"><span class="id" title="lemma">power_eq2</span></a> ||<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="additions.Pow.html#power_of_power"><span class="id" title="lemma">power_of_power</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="power_of_square" class="idref" href="#power_of_square"><span class="id" title="lemma">power_of_square</span></a> <a id="x:76" class="idref" href="#x:76"><span class="id" title="binder">x</span></a> <a id="n:77" class="idref" href="#n:77"><span class="id" title="binder">n</span></a> : <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">(</span></a><a class="idref" href="additions.Pow.html#x:76"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:76"><span class="id" title="variable">x</span></a><a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">)</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:77"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a>  <a class="idref" href="additions.Pow.html#x:76"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:77"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:76"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:77"><span class="id" title="variable">n</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab404"></a><h2 class="section">Correctness of the binary algorithm</h2>


<div class="paragraph"> </div>

Correctness of the "concrete" functions <span class="inlinecode"><span class="id" title="var">Pos_bpow</span></span> and <span class="inlinecode"><span class="id" title="var">N_bpow</span></span>
with respect to the more abstract function <span class="inlinecode"><span class="id" title="var">power</span></span> is expressed 
by  extensional equalities, taking into account the conversion between 
various representations of natural numbers.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="binary_power_mult_ok" class="idref" href="#binary_power_mult_ok"><span class="id" title="lemma">binary_power_mult_ok</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="p:78" class="idref" href="#p:78"><span class="id" title="binder">p</span></a> <a id="a:79" class="idref" href="#a:79"><span class="id" title="binder">a</span></a> <a id="x:80" class="idref" href="#x:80"><span class="id" title="binder">x</span></a>,   <a class="idref" href="additions.Pow.html#binary_power_mult"><span class="id" title="definition">binary_power_mult</span></a>  <a class="idref" href="additions.Pow.html#x:80"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#a:79"><span class="id" title="variable">a</span></a> <a class="idref" href="additions.Pow.html#p:78"><span class="id" title="variable">p</span></a>  <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a>  <a class="idref" href="additions.Pow.html#a:79"><span class="id" title="variable">a</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:80"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.PArith.BinPos.html#Pos.to_nat"><span class="id" title="definition">Pos.to_nat</span></a> <a class="idref" href="additions.Pow.html#p:78"><span class="id" title="variable">p</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Pos_bpow_ok" class="idref" href="#Pos_bpow_ok"><span class="id" title="lemma">Pos_bpow_ok</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="p:81" class="idref" href="#p:81"><span class="id" title="binder">p</span></a> <a id="x:82" class="idref" href="#x:82"><span class="id" title="binder">x</span></a>, <a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> <a class="idref" href="additions.Pow.html#x:82"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#p:81"><span class="id" title="variable">p</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#x:82"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.PArith.BinPos.html#Pos.to_nat"><span class="id" title="definition">Pos.to_nat</span></a> <a class="idref" href="additions.Pow.html#p:81"><span class="id" title="variable">p</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Pos_bpow_proper" class="idref" href="#Pos_bpow_proper"><span class="id" title="instance">Pos_bpow_proper</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>  (<a class="idref" href="additions.Monoid_def.html#equiv"><span class="id" title="definition">equiv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="additions.Monoid_def.html#equiv"><span class="id" title="definition">equiv</span></a>) <a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="N_bpow_ok" class="idref" href="#N_bpow_ok"><span class="id" title="lemma">N_bpow_ok</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:83" class="idref" href="#n:83"><span class="id" title="binder">n</span></a> <a id="x:84" class="idref" href="#x:84"><span class="id" title="binder">x</span></a>, <a class="idref" href="additions.Pow.html#x:84"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">^</span></a><a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">b</span></a> <a class="idref" href="additions.Pow.html#n:83"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#x:84"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.NArith.BinNat.html#N.to_nat"><span class="id" title="definition">N.to_nat</span></a> <a class="idref" href="additions.Pow.html#n:83"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="N_bpow_ok_R" class="idref" href="#N_bpow_ok_R"><span class="id" title="lemma">N_bpow_ok_R</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:85" class="idref" href="#n:85"><span class="id" title="binder">n</span></a> <a id="x:86" class="idref" href="#x:86"><span class="id" title="binder">x</span></a>, <a class="idref" href="additions.Pow.html#x:86"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">^</span></a><a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">b</span></a>  <a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.NArith.BinNat.html#N.of_nat"><span class="id" title="definition">N.of_nat</span></a> <a class="idref" href="additions.Pow.html#n:85"><span class="id" title="variable">n</span></a><a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">)</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#x:86"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:85"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Pos_bpow_ok_R" class="idref" href="#Pos_bpow_ok_R"><span class="id" title="lemma">Pos_bpow_ok_R</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="p:87" class="idref" href="#p:87"><span class="id" title="binder">p</span></a> <a id="x:88" class="idref" href="#x:88"><span class="id" title="binder">x</span></a>, <a class="idref" href="additions.Pow.html#p:87"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> <a class="idref" href="additions.Pow.html#x:88"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.PArith.BinPos.html#Pos.of_nat"><span class="id" title="definition">Pos.of_nat</span></a> <a class="idref" href="additions.Pow.html#p:87"><span class="id" title="variable">p</span></a>) <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#x:88"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#p:87"><span class="id" title="variable">p</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="N_bpow_commute" class="idref" href="#N_bpow_commute"><span class="id" title="lemma">N_bpow_commute</span></a> : <span class="id" title="keyword">∀</span> <a id="x:89" class="idref" href="#x:89"><span class="id" title="binder">x</span></a> <a id="n:90" class="idref" href="#n:90"><span class="id" title="binder">n</span></a> <a id="p:91" class="idref" href="#p:91"><span class="id" title="binder">p</span></a>,  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">^</span></a><a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">b</span></a> <a class="idref" href="additions.Pow.html#n:90"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a>  <a class="idref" href="additions.Pow.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">^</span></a><a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">b</span></a> <a class="idref" href="additions.Pow.html#p:91"><span class="id" title="variable">p</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">^</span></a><a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">b</span></a> <a class="idref" href="additions.Pow.html#p:91"><span class="id" title="variable">p</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a>  <a class="idref" href="additions.Pow.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">^</span></a><a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">b</span></a> <a class="idref" href="additions.Pow.html#n:90"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Pos_bpow_of_plus" class="idref" href="#Pos_bpow_of_plus"><span class="id" title="lemma">Pos_bpow_of_plus</span></a> : <span class="id" title="keyword">∀</span> <a id="x:92" class="idref" href="#x:92"><span class="id" title="binder">x</span></a> <a id="n:93" class="idref" href="#n:93"><span class="id" title="binder">n</span></a> <a id="p:94" class="idref" href="#p:94"><span class="id" title="binder">p</span></a>, <a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> <a class="idref" href="additions.Pow.html#x:92"><span class="id" title="variable">x</span></a>  (<a class="idref" href="additions.Pow.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7"><span class="id" title="notation">+</span></a> <a class="idref" href="additions.Pow.html#p:94"><span class="id" title="variable">p</span></a>)%<span class="id" title="var">positive</span> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> <a class="idref" href="additions.Pow.html#x:92"><span class="id" title="variable">x</span></a>  <a class="idref" href="additions.Pow.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a>  <a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> <a class="idref" href="additions.Pow.html#x:92"><span class="id" title="variable">x</span></a>  <a class="idref" href="additions.Pow.html#p:94"><span class="id" title="variable">p</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Pos_bpow_of_bpow" class="idref" href="#Pos_bpow_of_bpow"><span class="id" title="lemma">Pos_bpow_of_bpow</span></a> : <span class="id" title="keyword">∀</span> (<a id="x:95" class="idref" href="#x:95"><span class="id" title="binder">x</span></a>:<a class="idref" href="additions.Pow.html#M_given.A"><span class="id" title="variable">A</span></a>) <a id="n:96" class="idref" href="#n:96"><span class="id" title="binder">n</span></a> <a id="p:97" class="idref" href="#p:97"><span class="id" title="binder">p</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> (<a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> <a class="idref" href="additions.Pow.html#x:95"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#n:96"><span class="id" title="variable">n</span></a>) <a class="idref" href="additions.Pow.html#p:97"><span class="id" title="variable">p</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="additions.Pow.html#Pos_bpow"><span class="id" title="definition">Pos_bpow</span></a> <a class="idref" href="additions.Pow.html#x:95"><span class="id" title="variable">x</span></a> (<a class="idref" href="additions.Pow.html#p:97"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.15.0/stdlib//Coq.PArith.BinPos.html#83db3fa9f059c10cb623a122cf097cd0"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#n:96"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">positive</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab405"></a><h2 class="section">Remark</h2>


<div class="paragraph"> </div>

If we normalize exponentiation functions with a given exponent, we notice
that the obtained functions do not execute the same computations, but it is
hard to visualize why the binary method is more efficient than the naive one.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">fun</span> (<a id="x:98" class="idref" href="#x:98"><span class="id" title="binder">x</span></a>:<a class="idref" href="additions.Pow.html#M_given.A"><span class="id" title="variable">A</span></a>) ⇒ <a class="idref" href="additions.Pow.html#x:98"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">^</span></a><a class="idref" href="additions.Pow.html#0ad68a69d54362abc023eb138c77275f"><span class="id" title="notation">b</span></a> 17.<br/>

<br/>
<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span>  <span class="id" title="keyword">fun</span> <a id="x:99" class="idref" href="#x:99"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="additions.Pow.html#x:99"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> 17.<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pow_17" class="idref" href="#pow_17"><span class="id" title="definition">pow_17</span></a>  (<a id="x:100" class="idref" href="#x:100"><span class="id" title="binder">x</span></a>:<a class="idref" href="additions.Pow.html#M_given.A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x2:101" class="idref" href="#x2:101"><span class="id" title="binder">x2</span></a> := <a class="idref" href="additions.Pow.html#x:100"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:100"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x4:102" class="idref" href="#x4:102"><span class="id" title="binder">x4</span></a> := <a class="idref" href="additions.Pow.html#x2:101"><span class="id" title="variable">x2</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x2:101"><span class="id" title="variable">x2</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x8:103" class="idref" href="#x8:103"><span class="id" title="binder">x8</span></a> := <a class="idref" href="additions.Pow.html#x4:102"><span class="id" title="variable">x4</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x4:102"><span class="id" title="variable">x4</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x16:104" class="idref" href="#x16:104"><span class="id" title="binder">x16</span></a> := <a class="idref" href="additions.Pow.html#x8:103"><span class="id" title="variable">x8</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x8:103"><span class="id" title="variable">x8</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="additions.Pow.html#x16:104"><span class="id" title="variable">x16</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#x:100"><span class="id" title="variable">x</span></a>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">cbv</span>  <span class="id" title="keyword">zeta</span> <span class="id" title="keyword">beta</span> <span class="id" title="keyword">delta</span> [<span class="id" title="var">pow_17</span>]  <span class="id" title="tactic">in</span>  <a class="idref" href="additions.Pow.html#pow_17"><span class="id" title="definition">pow_17</span></a>.<br/>

<br/>
</div>

<div class="doc">
 = fun x : A =&gt;
       x * x * (x * x) * (x * x * (x * x)) *
       (x * x * (x * x) * (x * x * (x * x))) * x
     : A -&gt; A

<div class="paragraph"> </div>


<div class="paragraph"> </div>

In order to compare the real computations needed to raise some  to its -th
power, we need to make more explicit how intermediate values are used during 
some computation. 
This is described in the module  (see ).

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab406"></a><h2 class="section">Properties of Abelian Monoids</h2>


<div class="paragraph"> </div>

 Some equalities hold in the restricted context of abelian (a.k.a. commutative)
 monoids. 

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="M_given.Power_of_op" class="idref" href="#M_given.Power_of_op"><span class="id" title="section">Power_of_op</span></a>.<br/>
&nbsp;<span class="id" title="keyword">Context</span>  {<a id="AM:105" class="idref" href="#AM:105"><span class="id" title="binder">AM</span></a>:<a class="idref" href="additions.Monoid_def.html#Abelian_EMonoid"><span class="id" title="class">Abelian_EMonoid</span></a> <a class="idref" href="additions.Pow.html#M_given.M"><span class="id" title="variable">M</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="power_of_mult" class="idref" href="#power_of_mult"><span class="id" title="lemma">power_of_mult</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:106" class="idref" href="#n:106"><span class="id" title="binder">n</span></a> <a id="x:107" class="idref" href="#x:107"><span class="id" title="binder">x</span></a> <a id="y:108" class="idref" href="#y:108"><span class="id" title="binder">y</span></a>,  <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">(</span></a><a class="idref" href="additions.Pow.html#x:107"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a> <a class="idref" href="additions.Pow.html#y:108"><span class="id" title="variable">y</span></a><a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">)</span></a>  <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:106"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a>  <a class="idref" href="additions.Pow.html#x:107"><span class="id" title="variable">x</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:106"><span class="id" title="variable">n</span></a> <a class="idref" href="additions.Monoid_def.html#e1cb395850f224a43e9550833db388b3"><span class="id" title="notation">×</span></a>  <a class="idref" href="additions.Pow.html#y:108"><span class="id" title="variable">y</span></a> <a class="idref" href="additions.Pow.html#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">^</span></a> <a class="idref" href="additions.Pow.html#n:106"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="additions.Pow.html#M_given.Power_of_op"><span class="id" title="section">Power_of_op</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="additions.Pow.html#M_given"><span class="id" title="section">M_given</span></a>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a id="765592cb239fbb605ff794a9833fef51" class="idref" href="#765592cb239fbb605ff794a9833fef51"><span class="id" title="notation">&quot;</span></a>^" := <a class="idref" href="additions.Pow.html#power"><span class="id" title="definition">power</span></a> : <span class="id" title="var">M_scope</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">monoid_simpl</span> <span class="id" title="var">M</span> := <span class="id" title="tactic">generalize</span> (<a class="idref" href="additions.Pow.html#Eop_proper"><span class="id" title="instance">Eop_proper</span></a> <span class="id" title="var">M</span>); <span class="id" title="tactic">intro</span>; <br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> ( <span class="id" title="tactic">rewrite</span> (<a class="idref" href="additions.Monoid_def.html#Eone_left"><span class="id" title="method">Eone_left</span></a> ) || <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="additions.Monoid_def.html#Eone_right"><span class="id" title="method">Eone_right</span></a>  ) || <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="additions.Monoid_def.html#Eop_assoc"><span class="id" title="method">Eop_assoc</span></a> )).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">power_simpl</span> <span class="id" title="var">M</span> := <span class="id" title="tactic">generalize</span> (<a class="idref" href="additions.Pow.html#Eop_proper"><span class="id" title="instance">Eop_proper</span></a> <span class="id" title="var">M</span>); <span class="id" title="tactic">intro</span>; <br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> ( <span class="id" title="tactic">rewrite</span> <a class="idref" href="additions.Monoid_def.html#Eone_left"><span class="id" title="method">Eone_left</span></a>  ||  <span class="id" title="tactic">rewrite</span> <a class="idref" href="additions.Monoid_def.html#Eone_right"><span class="id" title="method">Eone_right</span></a> ||  <span class="id" title="tactic">rewrite</span> <a class="idref" href="additions.Monoid_def.html#Eop_assoc"><span class="id" title="method">Eop_assoc</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" title="tactic">rewrite</span> <a class="idref" href="additions.Pow.html#power_of_plus"><span class="id" title="lemma">power_of_plus</span></a>).<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>